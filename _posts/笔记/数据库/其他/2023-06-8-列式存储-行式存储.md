---
title: 列式存储 vs 行式存储
date: 2023-06-8
categories: [笔记, 数据库, DB其他]
tags: [数据库]
---

# 列式存储 vs 列式存储

行式存储和列式存储是两种不同的数据存储方式，用于优化数据库的读取和查询性能。它们在数据的组织结构和访问方式上有所区别。

## 行式存储（Row-based Storage）：

> 行式存储将数据按照记录（行）的方式进行存储，每一行包含多个列（字段）。这种存储方式类似于传统的关系型数据库表格的结构，每个记录在存储时连续存放。
> 行式存储适用于以整行数据为单位进行读取的操作，例如查找特定记录或查询多个字段的数据。

优点：
* 适合OLTP（联机事务处理）场景，对事务性操作的支持较好。
* 对于特定记录的查找和更新操作速度较快。

缺点：
* 在需要查询大量列或进行复杂分析查询时，性能可能较差。因为行式存储需要读取整行数据，包括不需要的列数据。
* 不适合大规模数据的聚合查询，因为需要遍历多个记录来获取所有相关数据。

## 列式存储（Columnar Storage）：

> 列式存储将数据按照列的方式进行存储，将同一列的数据存储在一起。每个列形成一个单独的存储单元，其中包含该列的所有值。这种存储方式不考虑记录的顺序，而是关注每个列的值。
> 列式存储适用于需要查询特定列或进行聚合分析查询的操作。它可以更快地读取和处理特定的列数据，减少不必要的数据读取。

优点：
* 查询特定列或进行聚合查询时，性能较高。因为只需读取所需的列数据，而不需要读取整行。
* 对于大规模数据的分析和统计操作，性能较好。

缺点：
* 在进行事务性操作（如插入、更新）时，性能可能较差。因为需要对多个列进行修改。
* 总的来说，行式存储适合OLTP场景，而列式存储适合OLAP（联机分析处理）场景。选择适当的存储方式取决于具体的应用需求，包括数据的读取模式、查询类型、数据量和性能要求等。

# OLTP vs OLAP

OLAP（Online Analytical Processing）和OLTP（Online Transaction Processing）是两种不同类型的数据处理和分析方式。

## OLTP（联机事务处理）：

* OLTP是指面向业务应用的实时事务处理系统。它处理和管理日常的业务交易和操作，例如订单处理、库存管理、在线购物等。
* OLTP系统通常需要支持并发处理和高事务吞吐量，关注数据的准确性和一致性。
* OLTP数据库的特点是以行为单位存储和检索数据，关注对单个事务的快速读写和查询。
* OLTP系统的目标是支持日常的实时交易处理，并保持数据的完整性和可靠性。

## OLAP（联机分析处理）：

* OLAP是指面向决策支持和数据分析的处理系统。它用于查询和分析大量数据，提供多维度的数据视图和复杂的数据分析功能。
* OLAP系统通常用于生成报表、数据挖掘、多维分析和可视化等用途，用于支持决策制定和战略规划。
* OLAP数据库的特点是以列为单位存储和检索数据，关注对多个维度的聚合查询和复杂分析操作。
* OLAP系统的目标是提供灵活的数据分析和决策支持功能，帮助用户从多个维度和角度理解和解释数据。

## 主要区别：

* 数据结构：OLTP系统使用行式存储，而OLAP系统使用列式存储。
* 目标：OLTP系统关注实时事务处理和数据的准确性，而OLAP系统关注数据分析和决策支持。
* 查询类型：OLTP系统执行单个事务的增删改查操作，而OLAP系统执行复杂的聚合查询和多维分析操作。
* 数据量和复杂性：OLTP系统处理较小规模的数据集，而OLAP系统处理大规模的数据集和复杂的数据分析需求。
* 需要注意的是，OLTP和OLAP并不是相互排斥的概念，而是在不同的场景下使用不同的数据处理方式。许多企业系统中同时存在OLTP和OLAP系统，用于支持业务操作和数据分析的不同需求。
