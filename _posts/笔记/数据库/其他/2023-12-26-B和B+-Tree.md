---
title: BTree和B+Tree
date: 2023-12-26
categories: [笔记, 数据库, DB其他]
tags: [数据库]
---

# B和B+

```
1) B+树的搜索效率更高(因为fanout children更多，搜索1亿数据，fanout 100的话只需要4 次查询);
2) 对内存更友好，把非叶节点存在内存中，支持高效索引，然后sequential IO来读取具体的数据。

```

## 复杂度
### 时间
读取 nLog2n(n在这里是阶数)


## 参考链接
https://segmentfault.com/a/1190000020416577

## b+树是如何存在磁盘上的(参考答案)

我只说我了解的一个具体实现，即boltdb https://github.com/boltdb/bolt

该实现中，将数据查找的算法（即b+树）与数据的存储（即题主的问题所在）抽象为2个概念：node和page
page对应着操作系统内存页的最小分配单位（这里又牵涉到另外一个概念：mmap，作者出于性能等原因的考虑，使用这种方式使数据落地）

具体实现则是，page对node暴露了branch和leaf这2个接口，用于node组织b+树结构，同时page将branch和leaf对应的数据序列化后写入到硬盘中
由于node本身为b+树结构，所以检索（即数据查找）自然而然是标准的树查找算法，查找到相应的leaf节点后，从page中加载数据返回给上层调用


